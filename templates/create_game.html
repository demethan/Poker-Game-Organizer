{% extends "base.html" %}
{% block content %}
<h1>Create Game</h1>
<p>Organizer is included in total players. Add your display name below.</p>
{% if error %}<div class="error">{{ error }}</div>{% endif %}
<form method="post" class="grid grid-2">
  <input type="hidden" name="csrf_token" value="{{ csrf_token(request) }}">
  <div>
    <label>Game Title</label>
    <input type="text" name="title" placeholder="Friday Night Poker" required value="{{ last_game['title'] if last_game else '' }}">
  </div>
  <div>
    <label>Location</label>
    <input type="text" name="location" placeholder="123 Main St" required value="{{ last_game['location'] if last_game else '' }}">
  </div>
  <div>
    <label>Date</label>
    <input type="text" name="game_date" id="game_date" class="date-picker" required value="{{ last_game['game_date'] if last_game else '' }}">
  </div>
  <div>
    <label>Time</label>
    <input type="text" name="game_time" id="game_time" class="time-picker" required value="{{ last_game['game_time'] if last_game else '' }}">
  </div>
  <div>
    <label>Total Players</label>
    <input type="number" name="total_players" min="1" required value="{{ last_game['total_players'] if last_game else '' }}">
  </div>
  <div>
    <label>Organizer Display Name</label>
    <input type="text" name="organizer_name" required value="{{ last_organizer_name if last_organizer_name else '' }}">
  </div>
  <div>
    <button class="btn" type="submit">Create Game</button>
  </div>
</form>

<link rel="stylesheet" href="/static/flatpickr.min.css">
<script src="/static/flatpickr.min.js"></script>
<script>
  flatpickr('.date-picker', { dateFormat: 'Y-m-d', disableMobile: true });
  flatpickr('.time-picker', { enableTime: true, noCalendar: true, dateFormat: 'H:i', time_24hr: false, disableMobile: true });
</script>
{% endblock %}
